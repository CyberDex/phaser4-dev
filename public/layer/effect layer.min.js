(()=>{var l={BACKGROUND_COLOR:"BackgroundColor",BATCH_SIZE:"BatchSize",DEFAULT_ORIGIN:"DefaultOrigin",MAX_TEXTURES:"MaxTextures",PARENT:"Parent",SIZE:"Size",SCENES:"Scenes",RENDERER:"Renderer",AUTO:"Auto",WEBGL:"WebGL",CANVAS:"Canvas",WEBGL_CONTEXT:"WebGLContext",CANVAS_CONTEXT:"CanvasContext",BANNER:"Banner"};var p=new Map;function Et(r){p.set(l.BACKGROUND_COLOR,r)}function ie(r){return()=>{Et(r)}}function Ft(r="",t="",e="",o="#fff",i="linear-gradient(#3e0081 40%, #00bcc3)"){p.set(l.BANNER,{title:r,version:t,url:e,color:o,background:i})}function se(r){p.set(l.BATCH_SIZE,r)}function A(){return p.get(l.SIZE).height}function G(){return p.get(l.SIZE).resolution}function V(){return p.get(l.SIZE).width}function st(r=800,t=600,e=1){e===0&&(e=window.devicePixelRatio),p.set(l.SIZE,{width:r,height:t,resolution:e})}function Dt(r=800,t=600,e=1){return()=>{st(r,t,e)}}var ae=[],K={add:(r,t)=>{ae.push({texture:r,glConfig:t})},get:()=>ae,clear:()=>{ae.length=0}};function me(){return p.get(l.BACKGROUND_COLOR)}function At(r){p.set(l.RENDERER,r)}function Gt(r=.5,t=r){p.set(l.DEFAULT_ORIGIN,{x:r,y:t})}function J(r){p.set(l.MAX_TEXTURES,r)}function at(r){let t;return r&&(typeof r=="string"?t=document.getElementById(r):typeof r=="object"&&r.nodeType===1&&(t=r)),t||(t=document.body),t}function ce(r){r&&p.set(l.PARENT,at(r))}function Vt(r){return()=>{ce(r)}}function fe(r){p.set(l.SCENES,[].concat(r))}function Bt(r){return()=>{fe(r)}}function _t(r,t,e){return r.width<=0||r.height<=0?!1:r.x<=t&&r.x+r.width>=t&&r.y<=e&&r.y+r.height>=e}var R=class{constructor(t=0,e=0,o=0,i=0){this.set(t,e,o,i)}set(t=0,e=0,o=0,i=0){return this.x=t,this.y=e,this.width=o,this.height=i,this}contains(t,e){return _t(this,t,e)}set right(t){t<=this.x?this.width=0:this.width=t-this.x}get right(){return this.x+this.width}set bottom(t){t<=this.y?this.height=0:this.height=t-this.y}get bottom(){return this.y+this.height}};function ue(r,t=0,e=0,o=0,i=0){let s=new R(t,e,o,i);return r.viewportStack.push(s),s}var n,vr={get:()=>n,set:r=>{n=r}};function N(r,t){if(!t&&(t=r.currentViewport,!t))return;let e=n.getParameter(n.VIEWPORT);(e[0]!==t.x||e[1]!==t.y||e[2]!==t.width||e[3]!==t.height)&&n.viewport(t.x,t.y,t.width,t.height)}function he(r,t=0,e=0,o=0,i=0){let s=ue(r,t,e,o,i);N(r,s),r.currentViewport=s}function z(r,t=!0,e){e||(e=r.currentFramebuffer);let{framebuffer:o,viewport:i}=e;n.bindFramebuffer(n.FRAMEBUFFER,o),t&&(n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)),i&&he(r,i.x,i.y,i.width,i.height)}function le(r){let t=r.viewportStack;t.length>1&&t.pop(),r.currentViewport=t[t.length-1],N(r)}function U(r){let t=r.framebufferStack;t.length>1&&(r.currentFramebuffer.viewport&&le(r),t.pop()),r.currentFramebuffer=t[t.length-1],z(r,!1)}function pe(r,t,e){let o={framebuffer:t,viewport:e};return r.framebufferStack.push(o),o}function tt(r,t,e=!0,o){let i=pe(r,t,o);z(r,e,i),r.currentFramebuffer=i}function de(r){let t=r.count;if(t===0)return;let e=r.currentVertexBuffer,o=r.currentShader,i=o.shader.renderToFramebuffer;if(i&&tt(r,o.shader.framebuffer,!0),t===e.batchSize){let s=e.isDynamic?n.DYNAMIC_DRAW:n.STATIC_DRAW;n.bufferData(n.ARRAY_BUFFER,e.data,s)}else{let s=e.indexed?t*e.entryElementSize:t*e.vertexElementSize,a=e.vertexViewF32.subarray(0,s);n.bufferSubData(n.ARRAY_BUFFER,0,a)}e.indexed?n.drawElements(n.TRIANGLES,t*e.entryIndexSize,n.UNSIGNED_SHORT,0):n.drawArrays(n.TRIANGLES,0,t),i&&U(r)}function M(r,t){t&&(r.count=t);let e=r.count;return e===0?!1:(de(r),r.prevCount=e,r.count=0,r.flushTotal++,!0)}function xe(r){M(r)}function br(r,t=[]){let e=r>>16&255,o=r>>8&255,i=r&255,s=r>16777215?r>>>24:255;return t[0]=e/255,t[1]=o/255,t[2]=i/255,t[3]=s/255,t}function wr(){return p.get(l.WEBGL_CONTEXT)}function It(r){let{parent:t,flipY:e,unpackPremultiplyAlpha:o,minFilter:i,magFilter:s,wrapS:a,wrapT:m,generateMipmap:f,isPOT:c}=r,u=t.image,d=t.width,T=t.height,g=n.createTexture();return n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,g),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),u?(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,u),d=u.width,T=u.height):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,d,T,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,m),f&&c&&n.generateMipmap(n.TEXTURE_2D),r.texture=g,g}function mt(r){n&&n.isFramebuffer(r)&&n.deleteFramebuffer(r)}function ct(r){n.isTexture(r)&&n.deleteTexture(r)}function Er(r,t){return r<1||t<1?!1:(r&r-1)==0&&(t&t-1)==0}function Fr(r,t=!0){n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r);let e=t?n.LINEAR:n.NEAREST;n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e)}function Dr(r){let t=r.parent.image,e=t.width,o=t.height;return e>0&&o>0&&(n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.texture),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,r.flipY),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),r.texture}var P=class{constructor(t,e={}){this.index=0,this.indexCounter=-1,this.dirtyIndex=!0,this.unpackPremultiplyAlpha=!0,this.flipY=!1,this.isPOT=!1,this.generateMipmap=!1,this.parent=t,this.isPOT=Er(t.width,t.height);let{texture:o=null,framebuffer:i=null,depthbuffer:s=null,unpackPremultiplyAlpha:a=!0,minFilter:m=this.isPOT?n.LINEAR_MIPMAP_LINEAR:n.LINEAR,magFilter:f=n.LINEAR,wrapS:c=n.CLAMP_TO_EDGE,wrapT:u=n.CLAMP_TO_EDGE,generateMipmap:d=this.isPOT,flipY:T=!1}=e;this.minFilter=m,this.magFilter=f,this.wrapS=c,this.wrapT=u,this.generateMipmap=d,this.flipY=T,this.unpackPremultiplyAlpha=a,i&&(this.framebuffer=i),s&&(this.depthbuffer=s),o?this.texture=o:It(this)}setFilter(t){this.texture&&Fr(this.texture,t)}create(){let t=this.texture;return t&&ct(t),It(this)}update(){return this.texture?Dr(this):It(this)}setIndex(t){this.dirtyIndex=t!==this.index,this.index=t}destroy(){ct(this.texture),mt(this.framebuffer),this.parent=null,this.texture=null,this.framebuffer=null}};function ge(){K.get().forEach(t=>{let{texture:e,glConfig:o}=t;e.binding||(e.binding=new P(e,o))}),K.clear()}function ft(){return p.get(l.MAX_TEXTURES)}var Co=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function yo(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function Se(r){let t=n.createShader(n.FRAGMENT_SHADER);for(;;){let e=Co.replace(/%forloop%/gi,yo(r));if(n.shaderSource(t,e),n.compileShader(t),!n.getShaderParameter(t,n.COMPILE_STATUS))r=r/2|0;else break}return r}function Te(r){let t=Se(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),e=ft();e===0||e>0&&e>t?J(t):e>0&&e<t&&(t=Math.max(8,e));let o=r.tempTextures;o.length&&o.forEach(s=>{n.deleteTexture(s)});let i=[];for(let s=0;s<t;s++){let a=n.createTexture();n.activeTexture(n.TEXTURE0+s),n.bindTexture(n.TEXTURE_2D,a),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),o[s]=a,i.push(s)}r.maxTextures=t,r.textureIndex=i,r.currentActiveTexture=1}function Ar(){return p.get(l.BATCH_SIZE)}function ut(r){n.isBuffer(r)&&n.deleteBuffer(r)}var Ce=class{constructor(t={}){this.indexed=!1,this.isDynamic=!1,this.count=0,this.offset=0;let{batchSize:e=1,dataSize:o=4,isDynamic:i=!0,elementsPerEntry:s=4,vertexElementSize:a=6}=t;this.batchSize=e,this.dataSize=o,this.vertexElementSize=a,this.isDynamic=i,this.elementsPerEntry=s,this.vertexByteSize=a*o,this.entryByteSize=this.vertexByteSize*s,this.bufferByteSize=e*this.entryByteSize,this.create()}resize(t){this.batchSize=t,this.bufferByteSize=t*this.entryByteSize,this.vertexBuffer&&ut(this.vertexBuffer),this.create()}create(){let t=new ArrayBuffer(this.bufferByteSize);this.data=t,this.vertexViewF32=new Float32Array(t),this.vertexViewU32=new Uint32Array(t),this.vertexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer);let e=this.isDynamic?n.DYNAMIC_DRAW:n.STATIC_DRAW;n.bufferData(n.ARRAY_BUFFER,t,e),n.bindBuffer(n.ARRAY_BUFFER,null)}add(t){this.count+=t,this.offset+=this.vertexElementSize*t}reset(){this.count=0,this.offset=0}canContain(t){return this.count+t<=this.batchSize}free(){return Math.max(0,1-this.count/this.batchSize)}bind(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer)}destroy(){ut(this.vertexBuffer),this.data=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexBuffer=null}};var Lt=class extends Ce{constructor(t={}){super(t);let{indexSize:e=4,entryIndexSize:o=6,indexLayout:i=null}=t;this.indexed=!0,this.indexSize=e,this.entryIndexSize=o,this.entryElementSize=this.vertexElementSize*this.elementsPerEntry;let s=[];if(i){this.indexLayout=i;for(let a=0;a<this.batchSize*e;a+=e)for(let m=0;m<i.length;m++)s.push(a+i[m])}this.create(),this.createIndexBuffer(s)}createIndexBuffer(t){this.index=new Uint16Array(t),this.indexBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,this.index,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),t=[]}bind(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer)}destroy(){super.destroy(),ut(this.indexBuffer),this.index=null,this.indexLayout=null,this.indexBuffer=null}};var Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bo=new Uint8Array(256);for(let r=0;r<Vr.length;r++)bo[Vr.charCodeAt(r)]=r;function k(){}var S=class{constructor(t){let e=new Float32Array(16);this.data=e,this.onChange=k,t?Array.isArray(t)?this.fromArray(t):this.fromArray(t.data):(e[0]=1,e[5]=1,e[10]=1,e[15]=1)}set(t,e,o,i,s,a,m,f,c,u,d,T,g,E,L,O){let y=this.data;return y[0]=t,y[1]=e,y[2]=o,y[3]=i,y[4]=s,y[5]=a,y[6]=m,y[7]=f,y[8]=c,y[9]=u,y[10]=d,y[11]=T,y[12]=g,y[13]=E,y[14]=L,y[15]=O,this.onChange(this),this}toArray(t=[],e=0){let o=this.data;for(let i=0;i<16;i++)t[e+i]=o[i];return t}fromArray(t,e=0){let o=this.data;for(let i=0;i<16;i++)o[i]=t[e+i];return this.onChange(this),this}toString(){return"[ mat4="+this.data.join(", ")+" ]"}destroy(){this.onChange=k,this.data=null}};function Re(r,t,e,o,i,s,a=new S){let m=1/(r-t),f=1/(e-o),c=1/(i-s);return a.set(-2*m,0,0,0,0,-2*f,0,0,0,0,2*c,0,(r+t)*m,(o+e)*f,(s+i)*c,1)}function Me(r,t){let e=new Map,o={size:1,type:n.FLOAT,normalized:!1,stride:0,offset:0},i=n.getProgramParameter(r,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){let a=n.getActiveAttrib(r,s);if(!a)break;let m=a.name,f=n.getAttribLocation(r,m);n.enableVertexAttribArray(f);let c=t.hasOwnProperty(m)?t[m]:{},{size:u=o.size,type:d=o.type,normalized:T=o.normalized,stride:g=o.stride,offset:E=o.offset}=c;e.set(m,{index:f,size:u,type:d,normalized:T,stride:g,offset:E})}return e}function ht(...r){r.forEach(t=>{n.deleteShader(t)})}function ve(...r){let t=n.createProgram();if(r.forEach(o=>{n.attachShader(t,o)}),n.linkProgram(t),!n.getProgramParameter(t,n.LINK_STATUS)){let o=n.getProgramInfoLog(t);return console.error(`Error linking program: ${o}`),n.deleteProgram(t),ht(...r),null}return t}function Ot(r,t){let e=n.createShader(t);if(n.shaderSource(e,r),n.compileShader(e),!n.getShaderParameter(e,n.COMPILE_STATUS)){let i=n.getShaderInfoLog(e),s=r.split(`
`).map((a,m)=>`${m}: ${a}`);return console.error(`Error compiling shader: ${i}`,s.join(`
`)),n.deleteShader(e),null}return e}function be(r,t,e=!1){switch(r.type){case n.INT:case n.BOOL:return e?o=>{n.uniform1iv(t,o)}:o=>{n.uniform1i(t,o)};case n.INT_VEC2:case n.BOOL_VEC2:return o=>{n.uniform2iv(t,o)};case n.INT_VEC3:case n.BOOL_VEC3:return o=>{n.uniform3iv(t,o)};case n.INT_VEC4:case n.BOOL_VEC4:return o=>{n.uniform4iv(t,o)};case n.FLOAT:return e?o=>{n.uniform1fv(t,o)}:o=>{n.uniform1f(t,o)};case n.FLOAT_VEC2:return o=>{n.uniform2fv(t,o)};case n.FLOAT_VEC3:return o=>{n.uniform3fv(t,o)};case n.FLOAT_VEC4:return o=>{n.uniform4fv(t,o)};case n.FLOAT_MAT2:return o=>{n.uniformMatrix2fv(t,!1,o)};case n.FLOAT_MAT3:return o=>{n.uniformMatrix3fv(t,!1,o)};case n.FLOAT_MAT4:return o=>{n.uniformMatrix4fv(t,!1,o)};case n.SAMPLER_2D:case n.SAMPLER_CUBE:return r.size>1?o=>{n.uniform1iv(t,o)}:o=>{n.uniform1i(t,o)}}}function we(r){let t=new Map,e=n.getProgramParameter(r,n.ACTIVE_UNIFORMS);for(let o=0;o<e;o++){let i=n.getActiveUniform(r,o),s=i.name;if(s.startsWith("gl_")||s.startsWith("webgl_"))continue;let a=n.getUniformLocation(r,i.name);if(a){let m=!1;s.substr(-3)==="[0]"&&(s=s.substr(0,s.length-3),m=i.size>1),t.set(s,be(i,a,m))}}return t}var Br=5121;var Nt=5126;var et={aVertexPosition:{size:2,type:Nt,normalized:!1,offset:0},aTextureCoord:{size:2,type:Nt,normalized:!1,offset:8},aTextureId:{size:1,type:Nt,normalized:!1,offset:16},aTintColor:{size:4,type:Br,normalized:!0,offset:20}};var Ee={uProjectionMatrix:new Float32Array,uCameraMatrix:new Float32Array,uTexture:0};function _r(r,t,e){n.bindFramebuffer(n.FRAMEBUFFER,r);let o=n.createRenderbuffer();return n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t,e),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,o),n.bindFramebuffer(n.FRAMEBUFFER,null),o}function zt(r,t){t||(t=n.COLOR_ATTACHMENT0);let e=n.createFramebuffer();return n.bindFramebuffer(n.FRAMEBUFFER,e),n.framebufferTexture2D(n.FRAMEBUFFER,t,n.TEXTURE_2D,r,0),n.bindFramebuffer(n.FRAMEBUFFER,null),e}var Ir=`#define SHADER_NAME SINGLE_QUAD_FRAG

precision highp float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;

void main (void)
{
    vec4 color = texture2D(uTexture, vTextureCoord);

    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);
}`;var Lr=`#define SHADER_NAME SINGLE_QUAD_VERT

precision highp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute float aTextureId;
attribute vec4 aTintColor;

uniform mat4 uProjectionMatrix;
uniform mat4 uCameraMatrix;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

void main (void)
{
    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vTintColor = aTintColor;

    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);
}`;var Ut=class{constructor(t,e,o,i,s,a){this.trimmed=!1,this.texture=t,this.key=e,this.x=o,this.y=i,this.width=s,this.height=a,this.sourceSizeWidth=s,this.sourceSizeHeight=a,this.updateUVs()}setPivot(t,e){this.pivot={x:t,y:e}}setSize(t,e){this.width=t,this.height=e,this.sourceSizeWidth=t,this.sourceSizeHeight=e,this.updateUVs()}setSourceSize(t,e){this.sourceSizeWidth=t,this.sourceSizeHeight=e}setTrim(t,e,o,i,s,a){this.trimmed=!0,this.sourceSizeWidth=t,this.sourceSizeHeight=e,this.spriteSourceSizeX=o,this.spriteSourceSizeY=i,this.spriteSourceSizeWidth=s,this.spriteSourceSizeHeight=a}getExtent(t,e){let o=this.sourceSizeWidth,i=this.sourceSizeHeight,s,a,m,f;return this.trimmed?(s=this.spriteSourceSizeX-t*o,a=s+this.spriteSourceSizeWidth,m=this.spriteSourceSizeY-e*i,f=m+this.spriteSourceSizeHeight):(s=-t*o,a=s+o,m=-e*i,f=m+i),{left:s,right:a,top:m,bottom:f}}setExtent(t){let e=t.transform,o=e.origin.x,i=e.origin.y,s=this.sourceSizeWidth,a=this.sourceSizeHeight,m,f,c,u;this.trimmed?(m=this.spriteSourceSizeX-o*s,f=this.spriteSourceSizeY-i*a,c=this.spriteSourceSizeWidth,u=this.spriteSourceSizeHeight):(m=-o*s,f=-i*a,c=s,u=a),e.setExtent(m,f,c,u)}updateUVs(){let{x:t,y:e,width:o,height:i}=this,s=this.texture.width,a=this.texture.height;this.u0=t/s,this.v0=e/a,this.u1=(t+o)/s,this.v1=(e+i)/a}};var b=class{constructor(t,e,o,i){this.key="",t&&(e=t.width,o=t.height),this.image=t,this.width=e,this.height=o,this.frames=new Map,this.data={},this.addFrame("__BASE",0,0,e,o),K.add(this,i)}addFrame(t,e,o,i,s){if(this.frames.has(t))return null;let a=new Ut(this,t,e,o,i,s);return this.frames.set(t,a),(!this.firstFrame||this.firstFrame.key==="__BASE")&&(this.firstFrame=a),a}getFrame(t){if(!t)return this.firstFrame;t instanceof Ut&&(t=t.key);let e=this.frames.get(t);return e||(console.warn(`Frame missing: ${t}`),e=this.firstFrame),e}setSize(t,e){this.width=t,this.height=e,this.frames.get("__BASE").setSize(t,e)}destroy(){this.binding&&this.binding.destroy(),this.frames.clear(),this.data=null,this.image=null,this.firstFrame=null}};var v=class{constructor(t){this.renderToFramebuffer=!1,this.renderToDepthbuffer=!1,t&&this.fromConfig(t)}fromConfig(t){let{attributes:e=et,fragmentShader:o=Ir,height:i=A(),renderToFramebuffer:s=!1,renderToDepthbuffer:a=!1,resolution:m=G(),vertexShader:f=Lr,width:c=V(),uniforms:u=Ee}=t;if(this.create(o,f,u,e),s){this.renderToFramebuffer=!0;let d=new b(null,c*m,i*m),T=new P(d);d.binding=T,T.framebuffer=zt(T.texture),a&&(this.renderToDepthbuffer=!0,T.depthbuffer=_r(T.framebuffer,d.width,d.height)),this.texture=d,this.framebuffer=T.framebuffer}}create(t,e,o,i){let s=Ot(t,n.FRAGMENT_SHADER),a=Ot(e,n.VERTEX_SHADER);if(!s||!a)return;let m=ve(s,a);if(!m)return;let f=n.getParameter(n.CURRENT_PROGRAM);n.useProgram(m),this.program=m,this.uniformSetters=we(m),this.uniforms=new Map;for(let[c,u]of Object.entries(o))this.uniforms.set(c,u);this.attributes=Me(m,i),n.useProgram(f)}updateUniforms(t){}bind(t){return this.updateUniforms(t),this.setUniforms(t)}setUniform(t,e){let o=this.uniforms;o.has(t)&&(o.set(t,e),this.uniformSetters.get(t)(e))}setUniforms(t){if(!this.program)return!1;n.useProgram(this.program);let e=this.uniforms;for(let[o,i]of this.uniformSetters.entries())i(e.get(o));return!0}setAttributes(t){if(this.program){let e=t.currentVertexBuffer.vertexByteSize;this.attributes.forEach(o=>{n.vertexAttribPointer(o.index,o.size,o.type,o.normalized,e,o.offset)})}}destroy(){ht(this.program),ct(this.texture),mt(this.framebuffer),this.uniforms.clear(),this.uniformSetters.clear(),this.attributes.clear(),this.program=null,this.texture=null,this.framebuffer=null}};var W=class extends v{constructor(t={}){let e=t;e.attributes=e.attributes?e.attributes:et,super(e)}bind(t){let e=this.uniforms;return e.set("uProjectionMatrix",t.projectionMatrix.data),e.set("uCameraMatrix",t.cameraMatrix.data),super.bind(t)}};var Or=`#define SHADER_NAME MULTI_QUAD_FRAG

precision highp float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture[%count%];

void main (void)
{
    vec4 color;

    %forloop%

    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);
}`;var Pt=class extends W{constructor(t={}){t.fragmentShader||(t.fragmentShader=Or),super(t)}create(t,e,o,i){let s=ft(),a="";for(let m=1;m<s;m++)m>1&&(a+=`
	else `),m<s-1&&(a+=`if (vTextureId < ${m}.5)`),a+=`
	{`,a+=`
		color = texture2D(uTexture[${m}], vTextureCoord);`,a+=`
	}`;t=t.replace(/%count%/gi,`${s}`),t=t.replace(/%forloop%/gi,a),super.create(t,e,o,i)}bind(t){return this.uniforms.set("uTexture",t.textureIndex),super.bind(t)}};function Fe(r,t,e,o){let i={enable:t,sfactor:e,dfactor:o};r.blendModeStack[0]=i,r.currentBlendMode=i,r.defaultBlendMode=i}function De(r,t=null,e){let o={framebuffer:t,viewport:e};r.framebufferStack[0]=o,r.currentFramebuffer=o,r.defaultFramebuffer=o}function Ae(r,t,e){let o={shader:t,textureID:e};r.shaderStack[0]=o,r.currentShader=o,r.defaultShader=o}function Ge(r,t){r.vertexBufferStack[0]=t,r.currentVertexBuffer=t,r.defaultVertexBuffer=t}function Ve(r,t=0,e=0,o=0,i=0){let s=new R(t,e,o,i);r.viewportStack[0]=s,r.currentViewport=s,r.defaultViewport=s}var Nr,zr=0,Ur=0,w={get:()=>Nr,set:r=>{Nr=r},getFrame:()=>zr,setFrame:r=>{zr=r},getElapsed:()=>Ur,setElapsed:r=>{Ur=r}};function lt(r=new S){return r.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}var Y=class{constructor(t=1,e=0,o=0,i=1,s=0,a=0){this.set(t,e,o,i,s,a)}set(t=1,e=0,o=0,i=1,s=0,a=0){return this.a=t,this.b=e,this.c=o,this.d=i,this.tx=s,this.ty=a,this}identity(){return this.set()}toArray(){let{a:t,b:e,c:o,d:i,tx:s,ty:a}=this;return[t,e,o,i,s,a]}fromArray(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5])}};var B=class{constructor(t,e=0,o=0){this._x=e,this._y=o,this.onChange=t}destroy(){this.onChange=k}set(t=0,e=0){return this._x=t,this._y=e,this.onChange&&this.onChange(this),this}get x(){return this._x}set x(t){let e=this._x;this._x=t,e!==t&&this.onChange(this)}get y(){return this._y}set y(t){let e=this._y;this._y=t,e!==t&&this.onChange(this)}toArray(t=[],e=0){let{x:o,y:i}=this;return t[e]=o,t[e+1]=i,t}fromArray(t,e=0){return this.set(t[e],t[e+1])}toString(){let{x:t,y:e}=this;return`{ x=${t}, y=${e} }`}};var pt={PI2:Math.PI*2,HALF_PI:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};var rt=class{constructor(){this.type="StaticCamera",this.dirtyRender=!0;let t=w.get();this.renderer=t.renderer,this.matrix=lt(),this.bounds=new R,this.worldTransform=new Y,this.reset()}reset(){let t=this.renderer;if(t){let e=t.width,o=t.height;this.width=e,this.height=o}this.bounds.set(0,0,this.width,this.height)}destroy(){this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}};var kt=class{constructor(t){this.count=0,this.prevCount=0,this.flushTotal=0,this.maxTextures=0,this.currentActiveTexture=0,this.startActiveTexture=0,this.tempTextures=[],this.textureIndex=[],this.framebufferStack=[],this.currentFramebuffer=null,this.defaultFramebuffer=null,this.vertexBufferStack=[],this.currentVertexBuffer=null,this.defaultVertexBuffer=null,this.shaderStack=[],this.currentShader=null,this.defaultShader=null,this.viewportStack=[],this.currentViewport=null,this.defaultViewport=null,this.blendModeStack=[],this.currentBlendMode=null,this.defaultBlendMode=null,this.renderer=t,this.projectionMatrix=new S,this.reset()}reset(){let t=this.renderer.gl,e=[0,1,2,2,3,0];this.quadShader=new W,this.quadBuffer=new Lt({isDynamic:!1,indexLayout:e}),this.quadCamera=new rt,Te(this),De(this),Fe(this,!0,t.ONE,t.ONE_MINUS_SRC_ALPHA),Ge(this,new Lt({batchSize:Ar(),indexLayout:e})),Ae(this,new Pt)}resize(t,e){Re(0,t,e,0,-1e3,1e3,this.projectionMatrix),this.quadCamera.reset(),Ve(this,0,0,t,e)}};function Be(r,t,e){let o={shader:t,textureID:e};return r.shaderStack.push(o),o}function _e(r,t){return r.vertexBufferStack.push(t),t}function X(r,t){t||(t=r.currentShader),t.shader.bind(r,t.textureID)&&t.shader.setAttributes(r)}function Ie(r,t){r.current2DCamera=t,r.cameraMatrix=t.matrix,X(r)}function dt(r,t){t||(t=r.currentBlendMode),t.enable?(n.enable(n.BLEND),n.blendFunc(t.sfactor,t.dfactor)):n.disable(n.BLEND)}function Le(r,t=0){let e=r.binding;e.setIndex(t),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e.texture)}function H(r,t){t||(t=r.currentVertexBuffer);let e=t.indexed?t.indexBuffer:null;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.bindBuffer(n.ARRAY_BUFFER,t.vertexBuffer)}function Wt(r){let t=r.vertexBufferStack;t.length>1&&t.pop(),r.currentVertexBuffer=t[t.length-1],H(r)}function Yt(r,t){let e=_e(r,t);H(r,e),r.currentVertexBuffer=e}function xt(r,t=0){let e=r.currentVertexBuffer;r.count+t>=e.batchSize&&M(r);let o=e.indexed?r.count*e.entryElementSize:r.count*e.vertexElementSize;return r.count+=t,{buffer:e,F32:e.vertexViewF32,U32:e.vertexViewU32,offset:o}}function Oe(r){let t=r.shaderStack;t.length>1&&t.pop(),r.currentShader=t[t.length-1],X(r)}function Ne(r,t,e){let o=Be(r,t,e);X(r,o),r.currentShader=o}function ze(r,t){let e=t.binding,o=r.currentActiveTexture;return e.indexCounter<r.startActiveTexture&&(e.indexCounter=r.startActiveTexture,o<r.maxTextures?(e.setIndex(o),n.activeTexture(n.TEXTURE0+o),n.bindTexture(n.TEXTURE_2D,e.texture),r.currentActiveTexture++):(M(r),r.startActiveTexture++,e.indexCounter=r.startActiveTexture,e.setIndex(1),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,e.texture),r.currentActiveTexture=2)),e.index}function Ue(r){r.current2DCamera=r.quadCamera,r.cameraMatrix=r.quadCamera.matrix,r.count=0,r.flushTotal=0,z(r,!1,r.defaultFramebuffer),dt(r,r.defaultBlendMode),N(r,r.defaultViewport),H(r,r.defaultVertexBuffer)}function Pe(r,t=0){n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,r.tempTextures[t]),t>0&&r.startActiveTexture++}var Pr,ke={get:()=>Pr,set:r=>{Pr=r}};var We=class{constructor(){this.clearColor=[0,0,0,1],this.clearBeforeRender=!0,this.optimizeRedraw=!1,this.autoResize=!0,this.contextLost=!1,this.width=V(),this.height=A(),this.resolution=G(),this.setBackgroundColor(me());let t=document.createElement("canvas");t.addEventListener("webglcontextlost",e=>this.onContextLost(e),!1),t.addEventListener("webglcontextrestored",()=>this.onContextRestored(),!1),this.canvas=t,this.initContext(),ke.set(this),this.renderPass=new kt(this),this.resize(this.width,this.height,this.resolution)}initContext(){let t=this.canvas.getContext("webgl",wr());vr.set(t),this.gl=t,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE)}resize(t,e,o=1){let i=t*o,s=e*o;this.width=i,this.height=s,this.resolution=o;let a=this.canvas;a.width=i,a.height=s,this.autoResize&&(a.style.width=t.toString()+"px",a.style.height=e.toString()+"px"),this.renderPass.resize(i,s)}onContextLost(t){t.preventDefault(),this.contextLost=!0}onContextRestored(){this.contextLost=!1,this.initContext()}setBackgroundColor(t){return br(t,this.clearColor),this}reset(){}render(t){if(this.contextLost)return;let e=this.gl,o=this.renderPass;if(ge(),this.optimizeRedraw&&t.numDirtyFrames===0&&t.numDirtyCameras===0)return;if(this.clearBeforeRender){let s=this.clearColor;e.clearColor(s[0],s[1],s[2],s[3]),e.clear(e.COLOR_BUFFER_BIT)}let i=t.worldData;Ue(o);for(let s=0;s<i.length;s++){let{world:a}=i[s];a.renderGL(o),a.postRenderGL(o)}xe(o)}destroy(){ke.set(void 0)}};function Ye(){return()=>{At(We)}}var x={CLEAR:0,TRANSFORM:1,UPDATE:2,CHILD_CACHE:4,POST_RENDER:8,COLORS:16,BOUNDS:32,TEXTURE:64,FRAME:128,ALPHA:256,CHILD:512,DEFAULT:1+2+16+32,USER1:536870912,USER2:1073741824,USER3:2147483648,USER4:4294967296};function gt(r){let{a:t,b:e,c:o,d:i,tx:s,ty:a}=r.world,{x:m,y:f,right:c,bottom:u}=r.extent,d=m*t+f*o+s,T=m*e+f*i+a,g=m*t+u*o+s,E=m*e+u*i+a,L=c*t+u*o+s,O=c*e+u*i+a,y=c*t+f*o+s,ne=c*e+f*i+a;return{x0:d,y0:T,x1:g,y1:E,x2:L,y2:O,x3:y,y3:ne}}var Xt=class{constructor(t){this.fixed=!1,this.includeChildren=!0,this.visibleOnly=!0,this.entity=t,this.area=new R}set(t,e,o,i){this.area.set(t,e,o,i)}get(){return this.entity.isDirty(x.BOUNDS)&&!this.fixed&&this.update(),this.area}updateLocal(){let{x0:t,y0:e,x1:o,y1:i,x2:s,y2:a,x3:m,y3:f}=gt(this.entity.transform),c=Math.min(t,o,s,m),u=Math.min(e,i,a,f),d=Math.max(t,o,s,m),T=Math.max(e,i,a,f);return this.area.set(c,u,d-c,T-u)}update(){let t=this.updateLocal();if(this.entity.clearDirty(x.BOUNDS),!this.includeChildren||!this.entity.numChildren)return t;let e=this.visibleOnly,o=this.entity.children,i=t.x,s=t.y,a=t.right,m=t.bottom;for(let f=0;f<o.length;f++){let c=o[f];if(!c||e&&!c.visible)continue;let u=c.bounds.get();u.x<i&&(i=u.x),u.y<s&&(s=u.y),u.right>a&&(a=u.right),u.bottom>m&&(m=u.bottom)}return t.set(i,s,a-i,m-s)}destroy(){this.entity=null,this.area=null}};var Ht=class{constructor(t){this.enabled=!1,this.enabledChildren=!0,this.entity=t}destroy(){this.entity=null,this.hitArea=null}};function Xe(){return p.get(l.DEFAULT_ORIGIN).x}function He(){return p.get(l.DEFAULT_ORIGIN).y}var h=class{constructor(t=0,e=0){this.set(t,e)}set(t=0,e=0){return this.x=t,this.y=e,this}toArray(t=[],e=0){let{x:o,y:i}=this;return t[e]=o,t[e+1]=i,t}fromArray(t,e=0){return this.set(t[e],t[e+1])}toString(){let{x:t,y:e}=this;return`{ x=${t}, y=${e} }`}};function qe(r){let t=r.local,e=r.position.x,o=r.position.y,i=r.rotation,s=r.scale.x,a=r.scale.y,m=r.skew.x,f=r.skew.y;t.set(Math.cos(i+f)*s,Math.sin(i+f)*s,-Math.sin(i-m)*a,Math.cos(i-m)*a,e,o)}function $e(r,t){let{a:e,b:o,c:i,d:s,tx:a,ty:m}=r;return t.set(e,o,i,s,a,m)}function Ze(r){let t=r.parent,e=r.transform,o=e.local,i=e.world;if(!t)$e(o,i);else if(e.passthru)$e(t.transform.world,i);else{let{a:s,b:a,c:m,d:f,tx:c,ty:u}=o,{a:d,b:T,c:g,d:E,tx:L,ty:O}=t.transform.world;i.set(s*d+a*g,s*T+a*E,m*d+f*g,m*T+f*E,c*d+u*g+L,c*T+u*E+O)}}var Qt=class{constructor(t,e=0,o=0){this.passthru=!1,this._rotation=0,this.entity=t,this.local=new Y,this.world=new Y;let i=()=>this.update(),s=()=>this.updateExtent();this.position=new B(i,e,o),this.scale=new B(i,1,1),this.skew=new B(i),this.origin=new B(s,Xe(),He()),this.extent=new R}update(){this.updateLocal(),this.updateWorld()}updateLocal(){this.entity.setDirty(x.TRANSFORM,x.BOUNDS),qe(this)}updateWorld(){let t=this.entity;t.setDirty(x.TRANSFORM,x.BOUNDS),Ze(t),t.numChildren&&this.updateChildren()}updateChildren(){let t=this.entity.children;for(let e=0;e<t.length;e++)t[e].transform.updateWorld()}globalToLocal(t,e,o=new h){let{a:i,b:s,c:a,d:m,tx:f,ty:c}=this.world,u=1/(i*m+a*-s);return o.x=m*u*t+-a*u*e+(c*a-f*m)*u,o.y=i*u*e+-s*u*t+(-c*i+f*s)*u,o}localToGlobal(t,e,o=new h){let{a:i,b:s,c:a,d:m,tx:f,ty:c}=this.world;return o.x=i*t+a*e+f,o.y=s*t+m*e+c,o}setExtent(t,e,o,i){this.extent.set(t,e,o,i),this.entity.setDirty(x.TRANSFORM,x.BOUNDS)}updateExtent(t,e){let o=this.extent,i=this.entity;t!==void 0&&(o.width=t),e!==void 0&&(o.height=e),o.x=-this.origin.x*o.width,o.y=-this.origin.y*o.height,i.setDirty(x.TRANSFORM,x.BOUNDS)}set rotation(t){t!==this._rotation&&(this._rotation=t,this.update())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.skew.destroy(),this.origin.destroy(),this.entity=null,this.local=null,this.world=null,this.position=null,this.scale=null,this.skew=null,this.origin=null,this.extent=null}};function Ke(r,t){return(((t*255|0)&255)<<24|r)>>>0}var Q=class{constructor(t=0,e=0,o=0){this.x=0,this.y=0,this.z=0,this.u=0,this.v=0,this.texture=0,this.tint=16777215,this.alpha=1,this.color=4294967295,this.x=t,this.y=e,this.z=o}setPosition(t,e,o=0){return this.x=t,this.y=e,this.z=o,this}setUV(t,e){return this.u=t,this.v=e,this}setColor(t,e=1){return this.tint=t,this.alpha=e,this.packColor(),this}setAlpha(t){return this.alpha=t,this}setTint(t){return this.tint=t,this}packColor(){this.color=Ke(this.tint,this.alpha)}};function Qr(r,t){let{F32:e,U32:o,offset:i}=xt(t,1),s=ze(t,r.texture),a=i;r.vertices.forEach(m=>{e[a+0]=m.x,e[a+1]=m.y,e[a+2]=m.u,e[a+3]=m.v,e[a+4]=s,o[a+5]=m.color,a+=6})}function Ct(r,t=0,e){let o=r.children;e===void 0&&(e=o.length);let i=e-t;if(i>0&&i<=e){let s=o.splice(t,i);return s.forEach(a=>{a.parent=null}),s}else return[]}function Je(r,t=0,e){Ct(r,t,e).forEach(i=>{i.destroy()})}var yt="destroy";function C(r,t,...e){if(r.events.size===0||!r.events.has(t))return!1;let o=r.events.get(t);for(let i of o)i.callback.apply(i.context,e),i.once&&o.delete(i);return o.size===0&&r.events.delete(t),!0}var ot=class{constructor(){this.events=new Map}};var nt=class{constructor(t,e,o=!1){this.callback=t,this.context=e,this.once=o}};function Rt(r,t,e,o,i){let s=r.events,a=s.get(t);if(!e)s.delete(t);else if(e instanceof nt)a.delete(e);else{let m=!o,f=i!==void 0;for(let c of a)c.callback===e&&m&&c.context===o&&f&&c.once===i&&a.delete(c)}return a.size===0&&s.delete(t),r}function j(r,t,e,o=r,i=!1){if(typeof e!="function")throw new TypeError("Listener not a function");let s=new nt(e,o,i),a=r.events.get(t);return a?a.add(s):r.events.set(t,new Set([s])),s}function Mt(r,t,e,o=r){return j(r,t,e,o,!0)}function q(r){let t=[r],e=[];for(;t.length>0;){let o=t.shift();e.push(o);let i=o.numChildren;if(i>0)for(let s=i-1;s>=0;s--)t.unshift(o.children[s])}return e.shift(),e}function D(r,t){return r.children.indexOf(t)}function jt(r,t){let e=r.children,o;if(t>=0&&t<e.length){let i=e.splice(t,1);i[0]&&(o=i[0],o.parent=null)}return o}function vt(r,t){let e=D(r,t);return e>-1&&jt(r,e),t}var qt="addedtoworld";var tr="postupdate";var $t="removedfromworld";var er="update";function rr(r,...t){return t.forEach(e=>{e.world&&(C(e.world,$t,e,e.world),C(e,$t,e,e.world)),e.world=r,C(r,qt,e,r),C(e,qt,e,r)}),t}function $(r,...t){t.forEach(o=>{o.parent&&vt(o.parent,o),o.parent=r});let e=r.world;return e&&rr(e,...q(r)),t}function or(r,t,e=0,o){let i=Ct(r,e,o);return $(t,...i),i.forEach(s=>{s.transform.updateWorld()}),i}var _=class{constructor(t=0,e=0){this.type="GameObject",this.name="",this.willUpdate=!0,this.willUpdateChildren=!0,this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!1,this.dirty=0,this.dirtyFrame=0,this.visible=!0,this.children=[],this.events=new Map,this.transform=new Qt(this,t,e),this.bounds=new Xt(this),this.input=new Ht(this),this.dirty=x.DEFAULT,this.transform.update()}isRenderable(){return this.visible&&this.willRender}isDirty(t){return(this.dirty&t)!=0}clearDirty(t){return this.isDirty(t)&&(this.dirty^=t),this}setDirty(t,e){return this.isDirty(t)||(this.dirty^=t,this.dirtyFrame=w.getFrame()),this.isDirty(e)||(this.dirty^=e),this}update(t,e){if(this.willUpdateChildren){let o=this.children;for(let i=0;i<o.length;i++){let s=o[i];s&&s.willUpdate&&s.update(t,e)}}this.postUpdate(t,e)}postUpdate(t,e){}renderGL(t){}renderCanvas(t){}postRenderGL(t){}postRenderCanvas(t){}get numChildren(){return this.children.length}destroy(t){t?or(this,t):Je(this),C(this,yt,this),this.transform.destroy(),this.bounds.destroy(),this.input.destroy(),this.events.clear(),this.world=null,this.parent=null,this.children=null}};var Zt=class extends _{constructor(t=0,e=0){super(t,e);this._alpha=1,this.type="Container"}setSize(t,e=t){return this.transform.updateExtent(t,e),this}setPosition(t,e){return this.transform.position.set(t,e),this}setOrigin(t,e=t){return this.transform.origin.set(t,e),this}setSkew(t,e=t){return this.transform.skew.set(t,e),this}setScale(t,e=t){return this.transform.scale.set(t,e),this}setRotation(t){return this.transform.rotation=t,this}set width(t){this.transform.updateExtent(t)}get width(){return this.transform.extent.width}set height(t){this.transform.updateExtent(void 0,t)}get height(){return this.transform.extent.height}set x(t){this.transform.position.x=t}get x(){return this.transform.position.x}set y(t){this.transform.position.y=t}get y(){return this.transform.position.y}set originX(t){this.transform.origin.x=t}get originX(){return this.transform.origin.x}set originY(t){this.transform.origin.y=t}get originY(){return this.transform.origin.y}set skewX(t){this.transform.skew.x=t}get skewX(){return this.transform.skew.x}set skewY(t){this.transform.skew.y=t}get skewY(){return this.transform.skew.y}set scaleX(t){this.transform.scale.x=t}get scaleX(){return this.transform.scale.x}set scaleY(t){this.transform.scale.y=t}get scaleY(){return this.transform.scale.y}set rotation(t){this.transform.rotation=t}get rotation(){return this.transform.rotation}get alpha(){return this._alpha}set alpha(t){t!==this._alpha&&(this._alpha=t,this.setDirty(x.TRANSFORM))}};function jr(r,t){let e=r.frame;if(!e)return;let o=t.ctx,i=r.transform,{a:s,b:a,c:m,d:f,tx:c,ty:u}=i.world,{x:d,y:T}=i.extent;o.save(),o.setTransform(s,a,m,f,c,u),o.globalAlpha=r.alpha,o.drawImage(e.texture.image,e.x,e.y,e.width,e.height,d,T,e.width,e.height),o.restore()}function qr(r){return r.vertices.forEach(t=>{t.packColor()}),r}function Kt(r,t,...e){let o=r.getFrame(t),{u0:i,u1:s,v0:a,v1:m,pivot:f}=o;return e.forEach(c=>{if(!c||o===c.frame)return;c.frame=o,f&&c.setOrigin(f.x,f.y),c.frame.setExtent(c),c.hasTexture=!0;let u=c.vertices;u[0].setUV(i,a),u[1].setUV(i,m),u[2].setUV(s,m),u[3].setUV(s,a)}),e}var $r,Z={get:()=>$r,set:r=>{$r=r}};function Zr(r,t,...e){if(!r)e.forEach(o=>{o.texture=null,o.frame=null,o.hasTexture=!1});else{let o;r instanceof b?o=r:o=Z.get().get(r),o?(e.forEach(i=>{i.texture=o}),Kt(o,t,...e)):console.warn(`Invalid Texture key: ${r}`)}return e}function Kr(r){let t=r.vertices,{x0:e,y0:o,x1:i,y1:s,x2:a,y2:m,x3:f,y3:c}=gt(r.transform);return t[0].setPosition(e,o),t[1].setPosition(i,s),t[2].setPosition(a,m),t[3].setPosition(f,c),r}var F=class extends Zt{constructor(t,e,o,i){super(t,e);this.hasTexture=!1,this._tint=16777215,this.type="Sprite",this.vertices=[new Q,new Q,new Q,new Q],this.setTexture(o,i)}setTexture(t,e){return Zr(t,e,this),this}setFrame(t){return Kt(this.texture,t,this),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.alpha>0}preRender(){this.isDirty(x.COLORS)&&(qr(this),this.clearDirty(x.COLORS)),this.isDirty(x.TRANSFORM)&&(Kr(this),this.clearDirty(x.TRANSFORM))}renderGL(t){this.preRender(),Qr(this,t)}renderCanvas(t){this.preRender(),jr(this,t)}get alpha(){return this._alpha}set alpha(t){t!==this._alpha&&(this._alpha=t,this.vertices.forEach(e=>{e.setAlpha(t)}),this.setDirty(x.COLORS))}get tint(){return this._tint}set tint(t){t!==this._tint&&(this._tint=t,this.vertices.forEach(e=>{e.setTint(t)}),this.setDirty(x.COLORS))}destroy(t){super.destroy(t),this.texture=null,this.frame=null,this.hasTexture=!1,this.vertices=[]}};function Jr(r,t,e,o,i,s,a,m,f,c=0,u=4294967295){let{F32:d,U32:T,offset:g}=xt(r,1);d[g+0]=t,d[g+1]=e,d[g+2]=s,d[g+3]=f,d[g+4]=c,T[g+5]=u,d[g+6]=t,d[g+7]=e+i,d[g+8]=s,d[g+9]=a,d[g+10]=c,T[g+11]=u,d[g+12]=t+o,d[g+13]=e+i,d[g+14]=m,d[g+15]=a,d[g+16]=c,T[g+17]=u,d[g+18]=t+o,d[g+19]=e,d[g+20]=m,d[g+21]=f,d[g+22]=c,T[g+23]=u}function it(r,t,e){e||(e=r.quadShader);let{u0:o,v0:i,u1:s,v1:a}=t.firstFrame;Le(t,0),Yt(r,r.quadBuffer),Ne(r,e,0),Jr(r,0,0,t.width,t.height,o,i,s,a,0),M(r),Wt(r),Oe(r),Pe(r)}var bt=class extends _{constructor(){super();this.type="Layer",this.transform.passthru=!0,this.willRender=!1}};var Jt=class extends bt{constructor(){super();this.type="RenderLayer",this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!0,this.setDirty(x.CHILD_CACHE);let t=V(),e=A(),o=G(),i=new b(null,t*o,e*o),s=new P(i);i.binding=s,s.framebuffer=zt(s.texture),this.texture=i,this.framebuffer=s.framebuffer}renderGL(t){this.numChildren>0&&(M(t),!this.willCacheChildren||this.isDirty(x.CHILD_CACHE)?(tt(t,this.framebuffer,!0),this.clearDirty(x.CHILD_CACHE)):(tt(t,this.framebuffer,!1),this.postRenderGL(t)))}postRenderGL(t){M(t),U(t),it(t,this.texture),this.clearDirty(x.TRANSFORM)}};var te=class extends Jt{constructor(...t){super();this.shaders=[],this.type="EffectLayer",Array.isArray(t)&&(this.shaders=t)}postRenderGL(t){let e=this.shaders,o=this.texture;if(M(t),U(t),e.length===0)it(t,o);else{let i=o;for(let s=0;s<e.length;s++){let a=e[s];it(t,i,a),i=a.texture}it(t,i)}this.clearDirty(x.TRANSFORM)}};function wt(r,t){let e=document.createElement("canvas");return e.width=r,e.height=t,e.getContext("2d")}function nr(r,t){return r.children.push(t),$(r,t),t.transform.updateWorld(),t}function ee(r,...t){return t.forEach(e=>{nr(r,e)}),t}function ir(r,...t){return t.forEach(e=>{vt(r,e)}),t}function sr(r,t){return at(t).appendChild(r),r}function ar(r){let t=document.readyState;if(t==="complete"||t==="interactive"){r();return}let e=()=>{document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),r()};document.body?window.hasOwnProperty("cordova")?document.addEventListener("deviceready",e,!0):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}function mr(){let{title:r,version:t,url:e,color:o,background:i}=p.get(l.BANNER);if(r!==""){let s=t!==""?r+" "+t:r;console.log(`%c${s}%c ${e}`,`padding: 4px 16px; color: ${o}; background: ${i}`,"")}}function cr(){return p.get(l.PARENT)}function fr(){return p.get(l.RENDERER)}function to(){return{gameFrame:0,numTotalFrames:0,numDirtyFrames:0,numDirtyCameras:0,worldData:[]}}function ur(){return p.get(l.SCENES)}function eo(r,t=0){r.gameFrame=t,r.numTotalFrames=0,r.numDirtyFrames=0,r.numDirtyCameras=0,r.worldData.length=0}var ro,re={get:()=>ro,set:r=>{ro=r}};var hr=class{constructor(){this.scenes=new Map,this.sceneIndex=0,this.flush=!1,this.renderResult=to(),this.game=w.get(),re.set(this),Mt(this.game,"boot",()=>this.boot())}boot(){ur().forEach(t=>new t)}update(t,e){for(let o of this.scenes.values())C(o,"update",t,e)}render(t){let e=this.renderResult;eo(e,t);for(let o of this.scenes.values())C(o,"render",e);return this.flush&&(e.numDirtyFrames++,this.flush=!1),e}};function oo(){Et(0),se(4096),Ft("Phaser","4.0.0","https://phaser4.io"),J(0),Gt(.5,.5),st(800,600,1)}var lr=class{constructor(){this.textures=new Map,this.createDefaultTextures(),Z.set(this)}createDefaultTextures(){this.add("__BLANK",new b(wt(32,32).canvas));let t=wt(32,32);t.strokeStyle="#0f0",t.moveTo(0,0),t.lineTo(32,32),t.stroke(),t.strokeRect(.5,.5,31,31),this.add("__MISSING",new b(t.canvas));let e=wt(32,32);e.fillStyle="#fff",e.fillRect(0,0,32,32),this.add("__WHITE",new b(e.canvas))}get(t){let e=this.textures;return e.has(t)?e.get(t):e.get("__MISSING")}has(t){return this.textures.has(t)}add(t,e,o){let i,s=this.textures;return s.has(t)||(e instanceof b?i=e:i=new b(e,0,0,o),i.key=t,s.set(t,i)),i}};var pr=class extends ot{constructor(...t){super();this.VERSION="4.0.0-beta1",this.isBooted=!1,this.isPaused=!1,this.willUpdate=!0,this.willRender=!0,this.lastTick=0,this.elapsed=0,this.frame=0,w.set(this),oo(),ar(()=>this.boot(t))}boot(t){t.forEach(i=>i());let e=fr();this.renderer=new e,this.textureManager=new lr,this.sceneManager=new hr;let o=cr();o&&sr(this.renderer.canvas,o),this.isBooted=!0,mr(),C(this,"boot"),this.lastTick=performance.now(),this.step(this.lastTick)}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.lastTick=performance.now()}step(t){let e=t-this.lastTick;this.lastTick=t,this.elapsed+=e,this.isPaused||(this.willUpdate&&(this.sceneManager.update(e,t),C(this,"update",e,t)),this.willRender&&this.renderer.render(this.sceneManager.render(this.frame))),this.frame++,w.setFrame(this.frame),w.setElapsed(this.elapsed),requestAnimationFrame(o=>this.step(o))}destroy(){}};var dr=class{constructor(t,e,o){this.responseType="text",this.crossOrigin=void 0,this.skipCache=!1,this.hasLoaded=!1,this.key=t,this.url=e,this.config=o}};function no(r,t,e,o){return t||(t=r+e),/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/.exec(t)?t:o?o.baseURL+o.path+t:t}function io(r){return r.data=new Image,r.crossOrigin&&(r.data.crossOrigin=r.crossOrigin),new Promise((t,e)=>{r.data.onload=()=>{r.data.onload&&(r.data.onload=null,r.data.onerror=null,t(r))},r.data.onerror=o=>{r.data.onload&&(r.data.onload=null,r.data.onerror=null,r.error=o,e(r))},r.data.src=r.url,r.data.complete&&r.data.width&&r.data.height&&(r.data.onload=null,r.data.onerror=null,t(r))})}function I(r,t,e){let o=new dr(r,t);return o.load=()=>(o.url=no(o.key,o.url,".png",o.loader),o.loader&&(o.crossOrigin=o.loader.crossOrigin),new Promise((i,s)=>{let a=Z.get();a.has(o.key)?i(o):io(o).then(m=>{a.add(m.key,m.data,e),i(m)}).catch(m=>{s(m)})})),o}var xr=class extends ot{constructor(){super();this.baseURL="",this.path="",this.crossOrigin="anonymous",this.maxParallelDownloads=-1,this.isLoading=!1,this.reset()}reset(){this.isLoading=!1,this.queue=new Set,this.inflight=new Set,this.completed=new Set,this.progress=0}add(...t){return t.forEach(e=>{e.loader=this,this.queue.add(e)}),this}start(){return this.isLoading?null:new Promise((t,e)=>{this.completed.clear(),this.progress=0,this.queue.size>0?(this.isLoading=!0,this.onComplete=t,this.onError=e,C(this,"start"),this.nextFile()):(this.progress=1,C(this,"complete"),t(this))})}nextFile(){let t=this.queue.size;if(this.maxParallelDownloads!==-1&&(t=Math.min(t,this.maxParallelDownloads)-this.inflight.size),t){let e=this.queue.values();for(;t>0;){let o=e.next().value;this.inflight.add(o),this.queue.delete(o),o.load().then(i=>this.fileComplete(i)).catch(i=>this.fileError(i)),t--}}else this.inflight.size===0&&this.stop()}stop(){!this.isLoading||(this.isLoading=!1,C(this,"complete",this.completed),this.onComplete(),this.completed.clear())}updateProgress(t){this.inflight.delete(t),this.completed.add(t);let e=this.completed.size,o=this.queue.size+this.inflight.size;e>0&&(this.progress=e/(e+o)),C(this,"progress",this.progress,e,o),this.nextFile()}fileComplete(t){C(this,"filecomplete",t),this.updateProgress(t)}fileError(t){C(this,"fileerror",t),this.updateProgress(t)}totalFilesToLoad(){return this.queue.size+this.inflight.size}setBaseURL(t=""){return t!==""&&t.substr(-1)!=="/"&&(t=t.concat("/")),this.baseURL=t,this}setPath(t=""){return t!==""&&t.substr(-1)!=="/"&&(t=t.concat("/")),this.path=t,this}setCORS(t){return this.crossOrigin=t,this}setMaxParallelDownloads(t){return this.maxParallelDownloads=t,this}};function so(r,t,e){return Object.prototype.hasOwnProperty.call(r,t)?r[t]:e}function ao(r,t={}){let e=re.get(),o=e.scenes.size,i=e.sceneIndex,s=o===0;typeof t=="string"?r.key=t:(t||!t&&s)&&(r.key=so(t,"key","scene"+i.toString())),e.scenes.has(r.key)?console.warn("Scene key already in use: "+r.key):(e.scenes.set(r.key,r),e.flush=!0,e.sceneIndex++)}var gr=class{constructor(t){this.game=w.get(),this.events=new Map,ao(this,t)}};var Sr="worldrender";var Tr="worldshutdown";function Cr(r,t){t.numRendered++,t.numRenderable++,r.node.dirtyFrame>=t.gameFrame&&t.dirtyFrame++,r.children.forEach(e=>{e.children.length>0&&Cr(e,t)})}function mo(r){if(r.node.isDirty(x.CHILD_CACHE))return!0;let t=[r];for(;t.length>0;){let e=t.pop();if(e.node.isDirty(x.TRANSFORM))return!0;let o=e.children.length;if(o>0)for(let i=0;i<o;i++)t.push(e.children[i])}return t.length=0,!1}function co(r,t){r.forEach(e=>{t||mo(e)?e.node.setDirty(x.CHILD_CACHE):e.children.length=0})}function yr(r,t,e=[]){for(let o=0;o<t.numChildren;o++){let i=t.children[o];if(i.isRenderable()){let s=[],a={node:i,children:s};e.push(a),i.willRenderChildren&&i.numChildren>0&&(i.willCacheChildren&&r.push(a),yr(r,i,s))}}return e}function fo(r){let t=[],o=yr(t,r,[]),i=r.renderData;t.length>0&&co(t,r.camera.dirtyRender),o.forEach(s=>{s.children.length>0?Cr(s,i):(i.numRendered++,i.numRenderable++,s.node.dirtyFrame>=i.gameFrame&&i.dirtyFrame++)}),r.renderList=o,r.forceRefresh&&(i.dirtyFrame++,r.forceRefresh=!1)}function uo(r,t){return r.a===t.a&&r.b===t.b&&r.c===t.c&&r.d===t.d&&r.tx===t.tx&&r.ty===t.ty}function ho(r,t){r.numDirtyFrames+=t.dirtyFrame,r.numTotalFrames+=t.numRendered,t.camera.dirtyRender&&r.numDirtyCameras++,r.worldData.push(t)}function oe(r,t){r.gameFrame=t,r.dirtyFrame=0,r.numRendered=0,r.numRenderable=0}var Rr=class extends _{constructor(t){super();this.forceRefresh=!1,this.is3D=!1,this.type="BaseWorld",this.scene=t,this.world=this,this.events=new Map,this.renderList=[],this._updateListener=j(t,"update",(e,o)=>this.update(e,o)),this._renderListener=j(t,"render",e=>this.render(e)),this._shutdownListener=j(t,"shutdown",()=>this.shutdown()),Mt(t,"destroy",()=>this.destroy())}update(t,e){!this.willUpdate||(C(this,er,t,e,this),super.update(t,e))}postUpdate(t,e){C(this,tr,t,e,this)}render(t){let e=this.renderData;oe(e,t.gameFrame),!(!this.willRender||!this.visible)&&(fo(this),C(this,Sr,e,this),ho(t,e),this.camera.dirtyRender=!1)}renderGL(t){let e=t.current2DCamera,o=this.camera;(!e||!uo(o.worldTransform,e.worldTransform))&&M(t),Ie(t,o),this.renderList.forEach(i=>{i.children.length>0?this.renderNode(i,t):i.node.renderGL(t)})}renderNode(t,e){t.node.renderGL(e),t.children.forEach(o=>{o.children.length>0?this.renderNode(o,e):o.node.renderGL(e)}),t.node.postRenderGL(e)}postRenderGL(t){}shutdown(){let t=this.scene;Rt(t,"update",this._updateListener),Rt(t,"render",this._renderListener),Rt(t,"shutdown",this._shutdownListener),ir(this),C(this,Tr,this),oe(this.renderData,0),this.camera&&this.camera.reset()}destroy(t){super.destroy(t),C(this,yt,this),oe(this.renderData,0),this.camera&&this.camera.destroy(),this.events.clear(),this.camera=null,this.renderData=null,this.events=null}};function lo(r,t){return{world:r,camera:t,gameFrame:0,dirtyFrame:0,numRendered:0,numRenderable:0}}var Mr=class extends Rr{constructor(t){super(t);this.type="StaticWorld",this.camera=new rt,this.renderData=lo(this,this.camera)}};var Ko=`
#define SHADER_NAME CLOUDS_FRAG

/*
 * Original shader from: https://www.shadertoy.com/view/MtjGRK
 */

precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

#define PI 3.14159265358979323

//Random
float rand(vec2 uv)
{
    float dt = dot(uv, vec2(12.9898, 78.233));
	return fract(sin(mod(dt, PI / 2.0)) * 43758.5453);
}

//Clouds from (https://www.shadertoy.com/view/MlS3z1)
const int iter = 8;

float turbulence(vec2 fragCoord, float octave, int id)
{
    float col = 0.0;
    vec2 xy;
    vec2 frac;
    vec2 tmp1;
    vec2 tmp2;
    float i2;
    float amp;
    float maxOct = octave;
    float time = uTime / 1000.0;
    for (int i = 0; i < iter; i++)
    {
        amp = maxOct / octave;
        i2 = float(i);
        xy = id == 1 || id == 4? (fragCoord + 50.0 * float(id) * time / (4.0 + i2)) / octave : fragCoord / octave;
        frac = fract(xy);
        tmp1 = mod(floor(xy) + uResolution.xy, uResolution.xy);
        tmp2 = mod(tmp1 + uResolution.xy - 1.0, uResolution.xy);
        col += frac.x * frac.y * rand(tmp1) / amp;
        col += frac.x * (1.0 - frac.y) * rand(vec2(tmp1.x, tmp2.y)) / amp;
        col += (1.0 - frac.x) * frac.y * rand(vec2(tmp2.x, tmp1.y)) / amp;
        col += (1.0 - frac.x) * (1.0 - frac.y) * rand(tmp2) / amp;
        octave /= 2.0;
    }
    return (col);
}
//____________________________________________________

void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
	vec2 uv = fragCoord.xy / uResolution.xy;

    vec3 sky = clamp(vec3(0.2, sin(uv.y), 1.0) + 0.3, 0.0, 1.0);

    vec4 color = texture2D(uTexture, vTextureCoord);

    // vec4 skyandtexture = mix(sky, color);

    float cloud1 = turbulence(fragCoord, 128.0, 1);
    float cloud2 = turbulence(fragCoord + 2000.0, 128.0, 1);
    float cloudss = clamp(pow(mix(cloud1, cloud2, 0.5), 30.0) / 9.0, 0.0, 1.0);

	// fragColor = sky + color + vec4(cloudss, 1.0);

    fragColor = color * vec4(sky + cloudss, 1.0);
}

void main(void)
{
    mainImage(gl_FragColor, gl_FragCoord.xy);
}
`,Jo=`
#define SHADER_NAME BARS_FRAG

precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

#define PI 0.01

void main (void)
{
    vec4 color = texture2D(uTexture, vTextureCoord);

    vec2 p = (gl_FragCoord.xy / uResolution.xy) - 0.5;

    float sx = 0.4 * sin(25.0 * p.y - (uTime * 0.001) * 2.0);

    float dy = 2.0 / (5.0 * abs(p.y - sx));

    gl_FragColor = color * vec4((p.x + 0.5) * dy, 0.5 * dy, dy - 1.65, 0.5);
}`,tn=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

float noise(vec2 pos) {
    return fract(sin(dot(pos, vec2(12.9898 - (uTime * 0.001) ,78.233 + (uTime * 0.001)))) * 43758.5453);
}

void main (void)
{
    vec2 normalPos = gl_FragCoord.xy / uResolution.xy;
    float pos = (gl_FragCoord.y / uResolution.y);
    //float mouse_dist = length(vec2((mouse.x - normalPos.x) * (uResolution.x / uResolution.y) , mouse.y - normalPos.y));
    float mouse_dist = 1.0;
    float distortion = clamp(1.0 - (mouse_dist + 0.1) * 3.0, 0.0, 1.0);

    pos -= (distortion * distortion) * 0.1;

    float c = sin(pos * 400.0) * 0.4 + 0.4;
    c = pow(c, 0.2);
    c *= 0.2;

    float band_pos = fract(uTime * 0.0001) * 3.0 - 1.0;
    c += clamp( (1.0 - abs(band_pos - pos) * 10.0), 0.0, 1.0) * 0.1;

    c += distortion * 0.08;
    // noise
    c += (noise(gl_FragCoord.xy) - 0.5) * (0.09);

    vec4 color = texture2D(uTexture, vTextureCoord);

    gl_FragColor = color + vec4( 0.0, c, 0.0, 1.0 );

}`,en=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

#define MAX_ITER 4

void main (void)
{
    vec2 v_texCoord = gl_FragCoord.xy / uResolution;

    vec2 p =  v_texCoord * 8.0 - vec2(20.0);
    vec2 i = p;
    float c = 1.0;
    float inten = .05;

    for (int n = 0; n < MAX_ITER; n++)
    {
        float t = (uTime * 0.0001) * (1.0 - (3.0 / float(n+1)));

        i = p + vec2(cos(t - i.x) + sin(t + i.y),
        sin(t - i.y) + cos(t + i.x));

        c += 1.0/length(vec2(p.x / (sin(i.x+t)/inten),
        p.y / (cos(i.y+t)/inten)));
    }

    c /= float(MAX_ITER);
    c = 1.5 - sqrt(c);

    vec4 texColor = vec4(0.0, 0.01, 0.015, 1.0);

    texColor.rgb *= (1.0 / (1.0 - (c + 0.05)));

    gl_FragColor = texture2D(uTexture, vTextureCoord) * texColor;
}`,rn=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

void main (void)
{
    vec2 uv = gl_FragCoord.xy / uResolution.xy;
    uv.y += (sin((uv.x + (uTime * 0.0005)) * 10.0) * 0.1) + (sin((uv.x + (uTime * 0.0002)) * 32.0) * 0.01);
    gl_FragColor = texture2D(uTexture, uv);
}`,on=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

void main (void)
{
    vec2 uv = gl_FragCoord.xy / uResolution.xy;

    // Represents the v/y coord(0 to 1) that will not sway.
    float fixedBasePosY = 0.0;

    // Configs for you to get the sway just right.
    float speed = 3.0;
    float verticleDensity = 6.0;
    float swayIntensity = 0.2;

    // Putting it all together.
    float offsetX = sin(uv.y * verticleDensity + (uTime * 0.001) * speed) * swayIntensity;

    // Offsettin the u/x coord.
    uv.x += offsetX * (uv.y - fixedBasePosY);

    gl_FragColor = texture2D(uTexture, uv);
}`,nn=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

void main (void)
{
    vec2 pixelSize = vec2(4.0, 4.0);
    vec2 size = uResolution.xy / pixelSize;
    vec2 color = floor((vTextureCoord * size)) / size + pixelSize / uResolution.xy * 0.5;

    gl_FragColor = texture2D(uTexture, color);
}`,sn=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

const float PI = 3.14159265;
float ptime = uTime * 0.0001;
float alpha = 1.0;
float size = 0.03;
float redShift = 0.5;
float greenShift = 0.5;
float blueShift = 0.9;

void main (void)
{
    vec4 tcolor = texture2D(uTexture, vTextureCoord);

    float color1, color2, color;

    color1 = (sin(dot(gl_FragCoord.xy, vec2(sin(ptime * 3.0), cos(ptime * 3.0))) * 0.02 + ptime * 3.0) + 1.0) / 2.0;
    vec2 center = vec2(640.0 / 2.0, 360.0 / 2.0) + vec2(640.0 / 2.0 * sin(-ptime * 3.0), 360.0 / 2.0 * cos(-ptime * 3.0));
    color2 = (cos(length(gl_FragCoord.xy - center) * size) + 1.0) / 2.0;
    color = (color1 + color2) / 2.0;

    float red = (cos(PI * color / redShift + ptime * 3.0) + 1.0) / 2.0;
    float green = (sin(PI * color / greenShift + ptime * 3.0) + 1.0) / 2.0;
    float blue = (sin(PI * color / blueShift + ptime * 3.0) + 1.0) / 2.0;

    gl_FragColor = tcolor * vec4(red, green, blue, alpha);
}`,an=`
precision highp float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;
uniform float uTime;
uniform vec2 uResolution;

void main (void)
{
    vec4 color = texture2D(uTexture, vTextureCoord);

    vec2 p = (gl_FragCoord.yx / uResolution.yx) - 0.5;

    float sx = 0.3 * (p.x + 0.8) * sin(900.0 * p.x - 1.0 * pow(uTime / 1000.0, 0.55) * 5.0);
    float dy = 4.0 / (500.0 * abs(p.y - sx));

    dy += 1.0 / (25.0 * length(p - vec2(p.x, 0.0)));

    gl_FragColor = color * vec4((p.x + 0.1) * dy, 0.3 * dy, dy, 1.1);
}`,mn=`
precision highp float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;

void main (void)
{
    vec4 color = texture2D(uTexture, vTextureCoord);

    gl_FragColor = color * vec4(1.0, 0.0, 0.0, 1.0);
}`,cn=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;

void main (void)
{
    vec4 sum = vec4(0.0);
    float blur = 0.001953125;

    sum += texture2D(uTexture, vec2(vTextureCoord.x - 4.0 * blur, vTextureCoord.y)) * 0.05;
    sum += texture2D(uTexture, vec2(vTextureCoord.x - 3.0 * blur, vTextureCoord.y)) * 0.09;
    sum += texture2D(uTexture, vec2(vTextureCoord.x - 2.0 * blur, vTextureCoord.y)) * 0.12;
    sum += texture2D(uTexture, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;
    sum += texture2D(uTexture, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;
    sum += texture2D(uTexture, vec2(vTextureCoord.x + 2.0 * blur, vTextureCoord.y)) * 0.12;
    sum += texture2D(uTexture, vec2(vTextureCoord.x + 3.0 * blur, vTextureCoord.y)) * 0.09;
    sum += texture2D(uTexture, vec2(vTextureCoord.x + 4.0 * blur, vTextureCoord.y)) * 0.05;

    gl_FragColor = sum;
}`,fn=`
precision mediump float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;

void main (void)
{
    vec4 sum = vec4(0.0);
    float blur = 0.001953125;

    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - 4.0 * blur)) * 0.05;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - 3.0 * blur)) * 0.09;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - 2.0 * blur)) * 0.12;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + 2.0 * blur)) * 0.12;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + 3.0 * blur)) * 0.09;
    sum += texture2D(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + 4.0 * blur)) * 0.05;

    gl_FragColor = sum;
}`,po=class extends gr{constructor(){super();let t=new xr;t.setPath("assets/"),t.add(I("background","farm-background.png")),t.add(I("ayu","ayu.png")),t.add(I("logo","logo.png")),t.add(I("rocket","rocket.png")),t.add(I("farm","farm-logo.png")),t.add(I("star","star.png")),t.add(I("bubble","bubble256.png")),t.start().then(()=>this.create()).catch()}create(){let t=new v({fragmentShader:mn}),e=new v({fragmentShader:cn}),o=new v({fragmentShader:fn}),i=new v({fragmentShader:an}),s=new v({fragmentShader:sn}),a=new v({fragmentShader:nn}),m=new v({fragmentShader:on}),f=new v({fragmentShader:rn}),c=new v({fragmentShader:en}),u=new v({fragmentShader:tn}),d=new v({fragmentShader:Jo}),T=new v({fragmentShader:Ko}),g=new Mr(this),E=new te,L=new F(400,300,"background"),O=new F(200,300,"logo"),y=new F(600,300,"ayu"),ne=new F(200,150,"farm"),xo=new F(150,500,"rocket"),go=new F(400,450,"bubble"),So=new F(650,500,"star");ee(E,y,O,ne,xo,go),ee(g,L,E,So)}};new pr(Ye(),Dt(800,600),Vt("gameParent"),ie(2960685),Bt(po));})();
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
